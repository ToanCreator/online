<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ToÃ n Creator - Online Lesson</title>
<style>
  :root {
    --yellow: #f9d342;
    --yellow-dark: #d4b833;
    --Green: #2ecc71;
    --starsGreen: #2ecc71;
    --red: #d93025;
    --green: #2ecc40;
    --starsGray: #ccc;
    --star-size: 30px;
    --orange: #ff9800;
  }
  body {
    margin:0; padding:0; font-family: Arial, sans-serif;
    background: white; color: black;
    transition: background-color 0.3s, color 0.3s;
  }
  body.dark {
    background: black; color: white;
  }
  /* Existing #app rule */
#app {
  max-width: 600px;
  margin: 0 auto;
  padding: 15px;
}

/* Media query for larger screens (e.g., tablets and desktops) */
@media (min-width: 768px) {
  #app {
    max-width: 960px; /* Or any wider value you prefer, e.g., 900px, 1200px */
    padding: 20px; /* Optional: Increase padding for more space on larger screens */
  }

  /* Optional: Adjust button widths for larger screens if they look too wide */
  .btn {
    max-width: 400px; /* Make main buttons a bit wider */
  }

  /* Optional: Adjust status bar layout for larger screens */
  .status-bar {
    font-size: 1.1em;
  }
}
  h1, h3 {
    text-align: center;
    margin: 10px 0;
  }
  h2 {
    text-align: center;
    margin: 10px 0;
    color: #FF00FF;
  }
  hr {
    border:none; border-bottom: 3px solid black;
    margin: 5px 0 25px 0;
  }
  .btn {
    background: #3399FF;
    border-radius: 8px;
    border:none;
    color: white;
    font-weight: bold;
    font-size: 1.2em;
    padding: 15px;
    width: 100%;
    max-width: 350px;
    margin: 10px auto;
    cursor: pointer;
    display: block;
    box-sizing: border-box;
    text-align: center;
    border: 3px solid transparent;
    user-select: none;
  }
  .btn:hover {
    background: var(--yellow-dark);
  }
  .btn svg {
    vertical-align: middle;
  }
  .question-container {
    margin-bottom: 20px;
    color: var(--orange) !important;
    font-weight: bold;
    font-size: 1.08em;
    transition: color 0.3s;
  }
  body.dark .question-container {
    color: var(--orange) !important;
  }
  .answers {
    margin-top: 15px;
  }
  .answer-btn {
    display: block;
    width: 100%;
    border: 2px solid black;
    border-radius: 6px;
    background-color: white;
    color: black;
    font-size: 1em;
    padding: 12px 10px;
    margin: 7px 0;
    cursor: pointer;
    text-align: left;
    user-select: none;
    transition: background-color 0.3s, border-color 0.3s, color 0.3s;
  }
  .answer-btn:hover:not(.disabled) {
    background-color: #eee;
  }
  body.dark .answer-btn {
    background-color: #222;
    color: white;
    border-color: white;
  }
  body.dark .answer-btn:hover:not(.disabled) {
    background-color: #444;
  }
  .answer-btn.correct {
    background-color: var(--green) !important;
    color: white !important;
    border-color: var(--green) !important;
  }
  .answer-btn.incorrect {
    background-color: var(--red) !important;
    color: white !important;
    border-color: var(--red) !important;
  }
  body.dark .answer-btn.correct {
    background-color: var(--green) !important;
    color: white !important;
    border-color: var(--green) !important;
  }
  body.dark .answer-btn.incorrect {
    background-color: var(--red) !important;
    color: white !important;
    border-color: var(--red) !important;
  }
  .disabled {
    pointer-events: none;
  }
  .status-bar {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    font-weight: bold;
  }
  .star-container {
    text-align: center;
    margin: 20px 0 10px 0;
  }
  .star {
    font-size: var(--star-size);
    margin: 0 5px;
    color: var(--starsGray);
  }
  .star.Green {
    color: var(--Green);
  }
  .star.red {
    color: var(--red);
  }
  .toggle-btn {
    background: lime;
    color: white;
    font-size: 1.5em;
    padding: 12px 0;
    margin: 25px auto;
    width: 150px;
    border-radius: 6px;
    cursor: pointer;
    user-select: none;
    display: block;
  }
  .input-textarea {
    width: 100%;
    min-height: 80px;
    font-size: 1em;
    padding: 10px;
    border-radius: 6px;
    border: 2px solid black;
    resize: vertical;
    box-sizing: border-box;
  }
  body.dark .input-textarea {
    background-color: #222;
    color: white;
    border-color: white;
  }
  .btn-small {
    background: #FF99CC;
    width: auto;
    padding: 8px 15px;
    font-size: 1em;
    margin-top: 10px;
  }
  .answer-btn img {
    max-width: 100%;
    max-height: 150px;
    margin-top: 5px;
    border: 1px solid #ccc;
    border-radius: 3px;
  }
  .question-container img {
    max-width: 100%;
    max-height: 300px;
    margin: 15px 0;
    border: 1px solid #ccc;
    border-radius: 5px;
  }
  body.dark .answer-btn img,
  body.dark .question-container img {
    border-color: #555;
  }
  .question-container img, .answer-btn img {
    display: block;
    margin: 0 auto;
    background: #f5f5f5;
  }
  body.dark .question-container img,
  body.dark .answer-btn img {
    background: #333;
  }
  /* Style for the header image placeholder */
  .header-image-placeholder {
    display: block;
    width: 100%; /* Hoáº·c má»™t chiá»u rá»™ng cá»‘ Ä‘á»‹nh */
    height: 100px; /* Äiá»u chá»‰nh chiá»u cao nÃ y Ä‘á»ƒ phÃ¹ há»£p vá»›i kÃ­ch thÆ°á»›c báº¡n muá»‘n */
    background-color: #f0f0f0; /* MÃ u ná»n Ä‘á»ƒ dá»… nhÃ¬n tháº¥y placeholder */
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.5em;
    color: #666;
    margin-bottom: 25px; /* Khoáº£ng cÃ¡ch vá»›i tiÃªu Ä‘á» bÃªn dÆ°á»›i */
    
  }
  body.dark .header-image-placeholder {
    background-color: #333;
    color: #bbb;
  }
</style>
</head>
<body>
<div id="app">
  <img src="https://i.ibb.co/tMdHNdPH/Picsart-25-07-17-06-40-25-073.jpg" alt="Header Image" class="header-image-placeholder">
  
  <h2>LÃ - BÃ€I 7</h2>

  <button class="btn" id="btn-exit" style="background: var(--red);">
    <svg width="24" height="24" fill="white" viewBox="0 0 24 24" style="vertical-align:middle; margin-right:5px;">
      <path d="M16 17v-4h-2V7h-4V4H6V2H4v2h2v4h4v6h2v4h4v2h2v-2h-2z"/>
    </svg>
    ThoÃ¡t
  </button>
  <button class="btn" id="btn-multi">TRáº®C NGHIá»†M 4 PHÆ¯Æ NG ÃN</button>
  <button class="btn" id="btn-truefalse">TRáº®C NGHIá»†M ÄÃšNG/SAI</button>
  <button class="btn" id="btn-essay">Tá»° LUáº¬N</button>

  <button class="toggle-btn" id="toggle-theme">ğŸ’¡</button>
  <button class="toggle-btn" id="btn-download" style="background: orange; margin-top: -20px; margin-bottom: 25px;">
    Táº£i xuá»‘ng
  </button>
  <div id="quiz-section" style="display:none; margin-top: 10px;">
    <div class="status-bar">
      <div><span id="timer">00:00</span></div>
      <div>ã…¤ã…¤Â <span id="done-count">0</span></div>
      <div>âœ…<span id="correct-count">0</span> | <strong>â›”</strong><span id="wrong-count">0</span></div>
    </div>

    <div id="question-block" class="question-container"></div>
    <div id="answers-block" class="answers"></div>

    <div id="essay-input-block" style="display:none;">
      <textarea id="essay-answer" class="input-textarea" placeholder="Nháº­p cÃ¢u tráº£ lá»i cá»§a báº¡n..."></textarea>
      <button id="btn-essay-submit" class="btn-small">Xong</button>
    </div>

    <div style="display:flex; justify-content: space-between; margin-top: 20px;">
      <button id="btn-back-home-in-quiz" class="btn btn-small" style="background: var(--Green); width: 48%;">
        <svg width="24" height="24" fill="white" viewBox="0 0 24 24" style="vertical-align:middle; margin-right:5px;">
          <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
        </svg>
      </button>
      <button id="btn-next" class="btn btn-small" style="width: 48%;">Tiáº¿p tá»¥c</button>
    </div>
  </div>

  <div id="result-section" style="display:none; text-align:center; margin-top: 30px;">
    <h2>Káº¾T THÃšC BÃ€I LÃ€M</h2>
    <div><strong>Tá»•ng thá»i gian lÃ m bÃ i:</strong> <span id="result-time"></span></div>
    <div><strong>Tá»•ng sá»‘ cÃ¢u Ä‘Ã£ lÃ m:</strong> <span id="result-total"></span></div>
    <div><strong>ÄÃºng:</strong><span id="result-correct"></span><strong> | </strong><strong>Sai:</strong><span id="result-wrong"></span></div>
    <div id="star-rating" class="star-container"></div>
    <div style="margin-top: 25px;">
      <button id="btn-home" class="btn" style="display:inline-block; width:120px;">
        <svg width="24" height="24" fill="white" viewBox="0 0 24 24" style="vertical-align:middle; margin-right:5px;">
          <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
        </svg> 
      </button>
      </div>
  </div>
</div>

<script>
(() => {
  // --- QUESTION DATA ---
  // Multiple choice questions [ABCD]
const multiChoiceQuestions = [
  {
    q: "Äiá»ƒm sÃ´i cá»§a nÆ°á»›c theo thang Ä‘á»™ F lÃ  bao nhiÃªu?", // need image
    qImage: "media/anh48.png",
    answers: [
      { text: "212Â°F.", correct: true, image: null },
      { text: "200Â°F.", correct: false, image: null },
      { text: "173Â°F.", correct: false, image: null },
      { text: "373Â°F.", correct: false, image: null }
    ]
  },
  {
    q: "Quy Æ°á»›c dáº¥u nÃ o sau Ä‘Ã¢y phÃ¹ há»£p vá»›i Ä‘á»‹nh luáº­t I cá»§a Nhiá»‡t Ä‘á»™ng lá»±c há»c?",
    qImage: null,
    answers: [
      { text: "Váº­t nháº­n cÃ´ng: A < 0; váº­t nháº­n nhiá»‡t lÆ°á»£ng: Q < 0.", correct: false, image: null },
      { text: "Váº­t thá»±c hiá»‡n cÃ´ng: A < 0; váº­t truyá»n nhiá»‡t lÆ°á»£ng: Q < 0.", correct: false, image: null },
      { text: "Váº­t nháº­n cÃ´ng: A > 0; váº­t nháº­n nhiá»‡t lÆ°á»£ng: Q > 0.", correct: true, image: null },
      { text: "Váº­t thá»±c hiá»‡n cÃ´ng: A > 0; váº­t truyá»n nhiá»‡t lÆ°á»£ng: Q > 0.", correct: false, image: null }
    ]
  },
  {
    q: "ÄÆ¡n vá»‹ nÃ o sau Ä‘Ã¢y lÃ  Ä‘Æ¡n vá»‹ cá»§a nhiá»‡t nÃ³ng cháº£y riÃªng cá»§a váº­t ráº¯n?",
    qImage: null,
    answers: [
      { text: "Jun (J).", correct: false, image: null },
      { text: "Jun trÃªn Ä‘á»™ (J/ Ä‘á»™).", correct: false, image: null },
      { text: "Jun trÃªn kilÃ´gam (J/ kg).", correct: true, image: null },
      { text: "Jun trÃªn kilÃ´gam Ä‘á»™ (J/kg. Ä‘á»™)", correct: false, image: null }
    ]
  },
  {
    q: "Vá»›i cÃ¹ng má»™t cháº¥t, quÃ¡ trÃ¬nh chuyá»ƒn thá»ƒ nÃ o sáº½ lÃ m giáº£m lá»±c tÆ°Æ¡ng tÃ¡c giá»¯a cÃ¡c phÃ¢n tá»­ nhiá»u nháº¥t?", // need image
    qImage: null,
    answers: [
      { text: "ÄÃ´ng Ä‘áº·c", correct: false, image: "media/anh43.png" },
      { text: "ThÄƒng hoa.", correct: false, image: "media/anh124.png" },
      { text: "HoÃ¡ hÆ¡i.", correct: true, image: "media/anh126.png" },
      { text: "NÃ³ng cháº£y.", correct: false, image: "media/anh57.jpg" }
    ]
  },
  {
    q: "Káº¿t luáº­n nÃ o dÆ°á»›i Ä‘Ã¢y khÃ´ng Ä‘Ãºng vá»›i thang nhiá»‡t Ä‘á»™ Celsius",
    qImage: null,
    answers: [
      { text: "Ä‘Æ¡n vá»‹ Ä‘o nhiá»‡t Ä‘á»™ lÃ  Â°C.", correct: false, image: null },
      { text: "kÃ­ hiá»‡u nhiá»‡t Ä‘á»™ lÃ  t.", correct: false, image: null },
      { text: "chá»n má»‘c nhiá»‡t Ä‘á»™ nÆ°á»›c Ä‘Ã¡ Ä‘ang tan á»Ÿ Ã¡p suáº¥t 1 atm lÃ  0Â°C.", correct: false, image: null },
      { text: "1Â°C tÆ°Æ¡ng á»©ng vá»›i 273Â°K.", correct: true, image: null }
    ]
  },
  {
    q: "NgÆ°á»i ta cung cáº¥p cho khÃ­ trong má»™t xilanh náº±m ngang nhiá»‡t lÆ°á»£ng 2 J. KhÃ­ ná»Ÿ ra Ä‘áº©y pit-tÃ´ng Ä‘i má»™t Ä‘oáº¡n 5 cm vá»›i má»™t lá»±c cÃ³ Ä‘á»™ lá»›n lÃ  20 N. Äá»™ biáº¿n thiÃªn ná»™i nÄƒng cá»§a khÃ­ lÃ  :", // need image
    qImage: "media/anh98.png",
    answers: [
      { text: "0,5 J.", correct: false, image: null },
      { text: "2 J.", correct: false, image: null },
      { text: "1,5 J.", correct: false, image: null },
      { text: "1 J.", correct: true, image: null }
    ]
  },
  {
    q: "Nhiá»‡t lÆ°á»£ng cáº§n cung cáº¥p cho 0,5 kg nÆ°á»›c á»Ÿ 0Â°C Ä‘áº¿n khi nÃ³ sÃ´i lÃ  bao nhiÃªu? Biáº¿t nhiá»‡t dung cá»§a nÆ°á»›c lÃ  4180 J/kg.K", // need image
    qImage: "media/anh117.png",
    answers: [
      { text: "5.10âµ J.", correct: false, image: null },
      { text: "3.10âµ J.", correct: false, image: null },
      { text: "2,09.10âµ J.", correct: true, image: null },
      { text: "4,18.10âµ J.", correct: false, image: null }
    ]
  },
  {
    q: "Nhiá»‡t lÆ°á»£ng cáº§n cung cáº¥p cho 2 kg nÆ°á»›c Ä‘Ã¡ á»Ÿ nhiá»‡t Ä‘á»™ 0Â°C lÃ  bao nhiÃªu Ä‘á»ƒ chuyá»ƒn lÃªn nhiá»‡t Ä‘á»™ 60Â°C. Biáº¿t nhiá»‡t dung riÃªng cá»§a nÆ°á»›c lÃ  4200 J/kg.K , nhiá»‡t nÃ³ng cháº£y riÃªng cá»§a nÆ°á»›c Ä‘Ã¡ lÃ  3,4.10âµ J/kg", // need image
    qImage: "media/anh117.png",
    answers: [
      { text: "0,72.10âµ J.", correct: false, image: null },
      { text: "1,184.10â¶ J.", correct: true, image: null },
      { text: "2,254.10â¶ J.", correct: false, image: null },
      { text: "1,548.10â¶ J.", correct: false, image: null }
    ]
  },
  {
    q: "Thá»i gian cáº§n thiáº¿t Ä‘á»ƒ lÃ m nÃ³ng cháº£y hoÃ n toÃ n 2 kg Ä‘á»“ng cÃ³ nhiá»‡t Ä‘á»™ ban Ä‘áº§u 30Â°C, trong má»™t lÃ² nung Ä‘iá»‡n cÃ³ cÃ´ng suáº¥t 20000 W. Biáº¿t chá»‰ cÃ³ 50% nÄƒng lÆ°á»£ng tiÃªu thá»¥ cá»§a lÃ² Ä‘Æ°á»£c dÃ¹ng vÃ o viá»‡c lÃ m Ä‘á»“ng nÃ³ng lÃªn vÃ  nÃ³ng cháº£y hoÃ n toÃ n á»Ÿ nhiá»‡t Ä‘á»™ khÃ´ng Ä‘á»•i. Biáº¿t nhiá»‡t dung riÃªng cá»§a nhÃ´m lÃ  385 J/kg.K", // need image
    qImage: "media/anh127.png",
    answers: [
      { text: "5,39 s.", correct: true, image: null },
      { text: "2,125 s.", correct: false, image: null },
      { text: "2,695 s.", correct: false, image: null },
      { text: "4,25 s.", correct: false, image: null }
    ]
  },
  {
    q: "Má»™t áº¥m Ä‘un nÆ°á»›c báº±ng nhÃ´m cÃ³ khá»‘i lÆ°á»£ng 400 g, chá»©a 3 lÃ­t nÆ°á»›c Ä‘Æ°á»£c Ä‘un trÃªn báº¿p. Khi nháº­n nhiá»‡t lÆ°á»£ng 740 kJ thÃ¬ áº¥m Ä‘áº¡t Ä‘áº¿n nhiá»‡t Ä‘á»™ 80Â°C. Nhiá»‡t Ä‘á»™ ban Ä‘áº§u cá»§a áº¥m vÃ  nÆ°á»›c lÃ  bao nhiÃªu? Biáº¿t nhiá»‡t dung riÃªng cá»§a nhÃ´m lÃ  880 J/kg.K , nhiá»‡t dung riÃªng cá»§a nÆ°á»›c lÃ  4190 J/kg.K . Coi nhiá»‡t lÆ°á»£ng mÃ  áº¥m toáº£ ra bÃªn ngoÃ i lÃ  khÃ´ng Ä‘Ã¡ng ká»ƒ.", // need image
    qImage: "media/anh100.png",
    answers: [
      { text: "45,2Â°C.", correct: false, image: null },
      { text: "22,7Â°C.", correct: true, image: null },
      { text: "37,2Â°C.", correct: false, image: null },
      { text: "16,7Â°C.", correct: false, image: null }
    ]
  },
  {
    q: "Nhiá»‡t lÆ°á»£ng cáº§n cung cáº¥p cho 5 kg nÆ°á»›c Ä‘Ã¡ á»Ÿ 0Â°C chuyá»ƒn thÃ nh nÆ°á»›c á»Ÿ cÃ¹ng nhiá»‡t Ä‘á»™ Ä‘Ã³ lÃ  bao nhiÃªu? Biáº¿t nhiá»‡t nÃ³ng cháº£y riÃªng cá»§a nÆ°á»›c Î» = 3,5.10âµ J/kg", // need image
    qImage: "media/anh117.png",
    answers: [
      { text: "17.10âµJ.", correct: false, image: null },
      { text: "15. 10âµ J.", correct: false, image: null },
      { text: "17,5.10âµJ.", correct: true, image: null },
      { text: "16.10âµ J.", correct: false, image: null }
    ]
  },
  {
    q: "NgÆ°á»i ta thá»±c hiá»‡n cÃ´ng 100 J Ä‘á»ƒ nÃ©n khÃ­ trong má»™t xilanh. Biáº¿t khÃ­ truyá»n ra mÃ´i trÆ°á»ng xung quanh nhiá»‡t lÆ°á»£ng 30 J Ä‘á»™ biáº¿n thiÃªn ná»™i nÄƒng cá»§a khÃ­ lÃ  :", // need image
    qImage: "media/anh83.png",
    answers: [
      { text: "30 J.", correct: false, image: null },
      { text: "70 J.", correct: true, image: null },
      { text: "130 J.", correct: false, image: null },
      { text: "100 J.", correct: false, image: null }
    ]
  },
  {
    q: "Má»™t lÆ°á»£ng xÃ¡c Ä‘á»‹nh trong Ä‘iá»u kiá»‡n Ã¡p suáº¥t bÃ¬nh thÆ°á»ng khi á»Ÿ thá»ƒ lá»ng vÃ  thá»ƒ khÃ­ sáº½ khÃ´ng khÃ¡c nhau vá»",
    qImage: null,
    answers: [
      { text: "khoáº£ng cÃ¡ch giá»¯a cÃ¡c phÃ¢n tá»­ (nguyÃªn tá»­).", correct: false, image: null },
      { text: "khá»‘i lÆ°á»£ng riÃªng.", correct: false, image: null },
      { text: "kÃ­ch thÆ°á»›c phÃ¢n tá»­ (nguyÃªn tá»­).", correct: true, image: null },
      { text: "váº­n tá»‘c cá»§a cÃ¡c phÃ¢n tá»­ (nguyÃªn tá»­).", correct: false, image: null }
    ]
  },
  {
    q: "Nhiá»‡t hÃ³a hÆ¡i riÃªng cá»§a nÆ°á»›c lÃ  2,3.10â¶ J/kg. CÃ¢u nÃ o dÆ°á»›i Ä‘Ã¢y lÃ  Ä‘Ãºng?",
    qImage: null,
    answers: [
      { text: "Má»—i kilogam nÆ°á»›c cáº§n thu má»™t lÆ°á»£ng nhiá»‡t lÃ  2,3.10â¶ J Ä‘á»ƒ bay hÆ¡i hoÃ n toÃ n á»Ÿ nhiá»‡t Ä‘á»™ sÃ´i vÃ  Ã¡p suáº¥t chuáº©n.", correct: true, image: null },
      { text: "Má»™t kilogam nÆ°á»›c cáº§n thu má»™t lÆ°á»£ng nhiá»‡t lÃ  2,3.10â¶ J Ä‘á»ƒ bay hÆ¡i hoÃ n toÃ n.", correct: false, image: null },
      { text: "Má»™t kilogam nÆ°á»›c sáº½ tá»a ra má»™t lÆ°á»£ng nhiá»‡t lÃ  2,3.10â¶ J khi bay hÆ¡i hoÃ n toÃ n á»Ÿ nhiá»‡t Ä‘á»™ sÃ´i.", correct: false, image: null },
      { text: "Má»™t lÆ°á»£ng nÆ°á»›c báº¥t kÃ¬ cáº§n thu má»™t lÆ°á»£ng nhiá»‡t lÃ  2,3.10â¶ J Ä‘á»ƒ bay hÆ¡i hoÃ n toÃ n.", correct: false, image: null }
    ]
  },
  {
    q: "CÃ´ng thá»©c tÃ­nh nhiá»‡t lÆ°á»£ng lÃ ",
    qImage: null,
    answers: [
      { text: "Q = mc.", correct: false, image: null },
      { text: "Q = câˆ†t.", correct: false, image: null },
      { text: "Q = mcâˆ†t.", correct: true, image: null },
      { text: "Q = mâˆ†t.", correct: false, image: null }
    ]
  },
  {
    q: "HÃ£y tÃ¬m Ã½ khÃ´ng Ä‘Ãºng vá»›i mÃ´ hÃ¬nh Ä‘á»™ng há»c phÃ¢n tá»­ trong cÃ¡c Ã½ sau:", // need image
    qImage: "media/anh7.png",
    answers: [
      { text: "Tá»‘c Ä‘á»™ chuyá»ƒn Ä‘á»™ng cá»§a cÃ¡c phÃ¢n tá»­ cáº¥u táº¡o nÃªn váº­t cÃ ng lá»›n thÃ¬ thá»ƒ tÃ­ch cá»§a váº­t cÃ ng lá»›n.", correct: true, image: null },
      { text: "CÃ¡c cháº¥t Ä‘Æ°á»£c cáº¥u táº¡o tá»« cÃ¡c háº¡t riÃªng biá»‡t lÃ  phÃ¢n tá»­.", correct: false, image: null },
      { text: "CÃ¡c phÃ¢n tá»­ chuyá»ƒn Ä‘á»™ng khÃ´ng ngá»«ng.", correct: false, image: null },
      { text: "Giá»¯a cÃ¡c phÃ¢n tá»­ cÃ³ lá»±c tÆ°Æ¡ng tÃ¡c gá»i lÃ  lá»±c liÃªn káº¿t phÃ¢n tá»­.", correct: false, image: null }
    ]
  },
  {
    q: "Äiá»ƒm Ä‘Ã³ng bÄƒng vÃ  sÃ´i cá»§a nÆ°á»›c theo thang nhiá»‡t Ä‘á»™ Kelvin lÃ ",
    qImage: null,
    answers: [
      { text: "273Â°K vÃ  373Â°K.", correct: true, image: null },
      { text: "0Â°K vÃ  100Â°K.", correct: false, image: null },
      { text: "73Â°K vÃ  37Â°K.", correct: false, image: null },
      { text: "32Â°K vÃ  212Â°K.", correct: false, image: null }
    ]
  },
  {
    q: "CÃ´ng thá»©c nÃ o sau Ä‘Ã¢y lÃ  cÃ´ng thá»©c chuyá»ƒn Ä‘á»•i Ä‘Ãºng Ä‘Æ¡n vá»‹ nhiá»‡t Ä‘á»™ tá»« Â°C sang thang Â°F?",
    qImage: null,
    answers: [
      { text: "T(Â°F) = â¹/â‚…T(Â°C)-32.", correct: false, image: null },
      { text: "T(Â°F)=âµ/â‚‰T(Â°C)+32.", correct: false, image: null },
      { text: "T(Â°F) = â¹/â‚…T(Â°C)+32.", correct: true, image: null },
      { text: "T(Â°F)=âµ/â‚‰T(Â°C)-32.", correct: false, image: null }
    ]
  },
  {
    q: "CÃ¢u nÃ o sau Ä‘Ã¢y nÃ³i vá» nhiá»‡t lÆ°á»£ng lÃ  khÃ´ng Ä‘Ãºng?",
    qImage: null,
    answers: [
      { text: "Má»™t váº­t lÃºc nÃ o cÅ©ng cÃ³ ná»™i nÄƒng, do Ä‘Ã³ lÃºc nÃ o cÅ©ng cÃ³ nhiá»‡t lÆ°á»£ng.", correct: true, image: null },
      { text: "Nhiá»‡t lÆ°á»£ng khÃ´ng pháº£i lÃ  ná»™i nÄƒng.", correct: false, image: null },
      { text: "ÄÆ¡n vá»‹ cá»§a nhiá»‡t lÆ°á»£ng cÅ©ng lÃ  Ä‘Æ¡n vá»‹ cá»§a ná»™i nÄƒng.", correct: false, image: null },
      { text: "Nhiá»‡t lÆ°á»£ng lÃ  sá»‘ Ä‘o Ä‘á»™ tÄƒng ná»™i nÄƒng cá»§a váº­t trong quÃ¡ trÃ¬nh truyá»n nhiá»‡t.", correct: false, image: null }
    ]
  },
  {
    q: "CÃ´ng thá»©c nÃ o sau Ä‘Ã¢y lÃ  cÃ´ng thá»©c chuyá»ƒn Ä‘á»•i Ä‘Ãºng Ä‘Æ¡n vá»‹ nhiá»‡t Ä‘á»™ tá»« Â°C sang thang Â°K?",
    qImage: null,
    answers: [
      { text: "T(Â°K) = T(Â°C)+273.", correct: true, image: null },
      { text: "T(Â°K) = T(Â°C) -273.", correct: false, image: null },
      { text: "T(Â°K)=âµ/â‚‰T(Â°C)-273.", correct: false, image: null },
      { text: "T(Â°K)=âµ/â‚‰T(Â°C)+273.", correct: false, image: null }
    ]
  },
  {
    q: "Trong quÃ¡ trÃ¬nh cháº¥t khÃ­ nháº­n nhiá»‡t vÃ  sinh cÃ´ng thÃ¬",
    qImage: null,
    answers: [
      { text: "Q < 0 vÃ  A < 0.", correct: false, image: null },
      { text: "Q < 0 vÃ  A > 0.", correct: false, image: null },
      { text: "Q > 0 vÃ  A > 0.", correct: true, image: null },
      { text: "Q > 0 vÃ  A < 0.", correct: false, image: null }
    ]
  },
  {
    q: "HÃ£y chá»n phÆ°Æ¡ng Ã¡n sai trong cÃ¡c cÃ¢u sau: cÃ¹ng cá»§a má»™t cháº¥t nhÆ°ng khÃ­ á»Ÿ cÃ¡c thá»ƒ khÃ¡c nhau thÃ¬ sáº½ khÃ¡c nhau.",
    qImage: null,
    answers: [
      { text: "tráº­t tá»± cá»§a nguyÃªn tá»­.", correct: false, image: null },
      { text: "khá»‘i lÆ°á»£ng riÃªng.", correct: true, image: null },
      { text: "thá»ƒ tÃ­ch.", correct: false, image: null },
      { text: "kÃ­ch thÆ°á»›c cá»§a nguyÃªn tá»­.", correct: false, image: null }
    ]
  },
  {
    q: "Trong thang Ä‘á»™ C, nhiá»‡t Ä‘á»™ khÃ´ng tuyá»‡t Ä‘á»‘i lÃ ",
    qImage: null,
    answers: [
      { text: "100Â°C.", correct: false, image: null },
      { text: "-273Â°C.", correct: true, image: null },
      { text: "0Â°C.", correct: false, image: null },
      { text: "-32Â°C.", correct: false, image: null }
    ]
  },
  {
    q: "Má»™t lÆ°á»£ng nÆ°á»›c vÃ  má»™t lÆ°á»£ng rÆ°á»£u cÃ³ thá»ƒ tÃ­ch báº±ng nhau Ä‘Æ°á»£c cung cáº¥p cÃ¡c nhiá»‡t lÆ°á»£ng tÆ°Æ¡ng á»©ng lÃ  Qâ‚ vÃ  Qâ‚‚. Biáº¿t khá»‘i lÆ°á»£ng riÃªng cá»§a nÆ°á»›c lÃ  1000kg/mÂ³ vÃ  cá»§a rÆ°á»£u lÃ  800kg/mÂ³, nhiá»‡t dung riÃªng cá»§a nÆ°á»›c lÃ  4200 J/kg.K vÃ  cá»§a rÆ°á»£u lÃ  2500 J/kg.K. Äá»ƒ Ä‘á»™ tÄƒng nhiá»‡t Ä‘á»™ cá»§a nÆ°á»›c vÃ  rÆ°á»£u báº±ng nhau thÃ¬:", // need image
    qImage: "media/anh128.png",
    answers: [
      { text: "Qâ‚ =Qâ‚‚.", correct: false, image: null },
      { text: "Qâ‚ =1,68Qâ‚‚.", correct: false, image: null },
      { text: "Qâ‚ =1,25Qâ‚‚.", correct: true, image: null },
      { text: "Qâ‚ = 2.10Qâ‚‚.", correct: false, image: null }
    ]
  },
  {
    q: "Äiá»u nÃ o sau Ä‘Ã¢y lÃ  sai khi nÃ³i vá» nhiá»‡t hoÃ¡ hÆ¡i.",
    qImage: "media/anh126.png",
    answers: [
      { text: "Nhiá»‡t hoÃ¡ hÆ¡i Ä‘Æ°á»£c tÃ­nh báº±ng cÃ´ng thá»©c Q = L.m trong Ä‘Ã³ L lÃ  nhiá»‡t hoÃ¡ hÆ¡i riÃªng cá»§a cháº¥t lá»ng, m lÃ  khá»‘i lÆ°á»£ng cá»§a cháº¥t lá»ng.", correct: false, image: null },
      { text: "ÄÆ¡n vá»‹ cá»§a nhiá»‡t hoÃ¡ hÆ¡i lÃ  Jun trÃªn kilÃ´gam (J/kg ).", correct: false, image: null },
      { text: "Nhiá»‡t hoÃ¡ hÆ¡i tá»‰ lá»‡ vá»›i khá»‘i lÆ°á»£ng cá»§a pháº§n cháº¥t lá»ng Ä‘Ã£ biáº¿n thÃ nh hÆ¡i.", correct: true, image: null },
      { text: "Nhá»‡t lÆ°á»£ng cáº§n cung cáº¥p cho khá»‘i cháº¥t lá»ng trong quÃ¡ trÃ¬nh sÃ´i gá»i lÃ  nhiá»‡t hoÃ¡ hÆ¡i cá»§a khá»‘i cháº¥t lá»ng á»Ÿ nhiá»‡t Ä‘á»™ sÃ´i.", correct: false, image: null }
    ]
  },
  {
    q: "Äiá»ƒm Ä‘Ã³ng bÄƒng vÃ  sÃ´i cá»§a nÆ°á»›c theo thang nhiá»‡t Ä‘á»™ Celsius lÃ ",
    qImage: null,
    answers: [
      { text: "32Â°C vÃ  212Â°C.", correct: false, image: null },
      { text: "73Â°C vÃ  37Â°C.", correct: false, image: null },
      { text: "0Â°C vÃ  100Â°C.", correct: true, image: null },
      { text: "273Â°C vÃ  373Â°C.", correct: false, image: null }
    ]
  },
  {
    q: "Má»™t lÆ°á»£ng khÃ­ Ä‘Æ°á»£c truyá»n 10 kJ nhiá»‡t nÄƒng Ä‘á»ƒ nÃ³ng lÃªn Ä‘á»“ng thá»i bá»‹ nÃ©n bá»Ÿi má»™t cÃ´ng cÃ³ Ä‘á»™ lá»›n 100 kJ. Äá»™ biáº¿n thiÃªn ná»™i nÄƒng cá»§a lÆ°á»£ng khÃ­ nÃ y lÃ ", // need image
    qImage: "media/anh84.png",
    answers: [
      { text: "10 kJ.", correct: false, image: null },
      { text: "100 J.", correct: false, image: null },
      { text: "110 kJ.", correct: true, image: null },
      { text: "90 kJ.", correct: false, image: null }
    ]
  },
  {
    q: "Biáº¿t nhiá»‡t dung cá»§a nÆ°á»›c lÃ  4180 J/kg.K . Nhiá»‡t lÆ°á»£ng cáº§n cung cáº¥p cho 1 kg nÆ°á»›c á»Ÿ 20Â°C sÃ´i lÃ  :",
    qImage: "media/anh89.png",
    answers: [
      { text: "8.10â´ J.", correct: false, image: null },
      { text: "32.10Â³ J.", correct: false, image: null },
      { text: "33,44. 10â´ J.", correct: true, image: null },
      { text: "10. 10â´ J.", correct: false, image: null }
    ]
  },
  {
    q: "CÃ´ng thá»©c nÃ o sau Ä‘Ã¢y lÃ  cÃ´ng thá»©c tá»•ng quÃ¡t cá»§a nguyÃªn lÃ­ má»™t nhiá»‡t Ä‘á»™ng lá»±c há»c ?",
    qImage: null,
    answers: [
      { text: "A + Q = 0 .", correct: false, image: null },
      { text: "âˆ†U = Q .", correct: false, image: null },
      { text: "âˆ†U = A + Q .", correct: true, image: null },
      { text: "âˆ†U = A .", correct: false, image: null }
    ]
  },
  {
    q: "Tháº£ má»™t quáº£ cáº§u nhÃ´m cÃ³ khá»‘i lÆ°á»£ng 0,5 kg Ä‘Æ°á»£c Ä‘un nÃ³ng tá»›i 100Â°C vÃ o má»™t cá»‘c nÆ°á»›c á»Ÿ 20Â°C. Sau má»™t thá»i gian nhiá»‡t Ä‘á»™ cá»§a quáº£ cáº§u vÃ  cá»§a nÆ°á»›c Ä‘á»u báº±ng 35Â°C. TÃ­nh khá»‘i lÆ°á»£ng nÆ°á»›c, coi nhÆ° chá»‰ cÃ³ quáº£ cáº§u vÃ  nÆ°á»›c truyá»n nhiá»‡t cho nhau. Biáº¿t nhiá»‡t dung riÃªng cá»§a nhÃ´m lÃ  880 J/kg.K, nhiá»‡t dung riÃªng cá»§a nÆ°á»›c lÃ  4180 J/kg.K", // need image
    qImage: "media/anh129.png",
    answers: [
      { text: "5,62 kg", correct: false, image: null },
      { text: "4,54 kg.", correct: false, image: null },
      { text: "0,562 kg.", correct: false, image: null },
      { text: "0,454 kg.", correct: true, image: null }
    ]
  },
  {
    q: "Lá»±c liÃªn káº¿t giá»¯a cÃ¡c phÃ¢n tá»­:", // need image
    qImage: "media/anh6.png",
    answers: [
      { text: "lÃ  lá»±c Ä‘áº©y.", correct: false, image: null },
      { text: "tuá»³ thuá»™c vÃ o thá»ƒ cá»§a nÃ³, á»Ÿ thá»ƒ ráº¯n lÃ  lá»±c hÃºt cÃ²n á»Ÿ thá»ƒ khÃ­ láº¡i lÃ  lá»±c Ä‘áº©y.", correct: false, image: null },
      { text: "gá»“m cáº£ lá»±c hÃºt vÃ  lá»±c Ä‘áº©y.", correct: true, image: null },
      { text: "lÃ  lá»±c hÃºt.", correct: false, image: null }
    ]
  },
  {
    q: "TÃ­nh nhiá»‡t lÆ°á»£ng cáº§n thiáº¿t Ä‘á»ƒ lÃ m cho 10 kg nÆ°á»›c á»Ÿ 25Â°C chuyá»ƒn hoÃ¡ thÃ nh hÆ¡i nÆ°á»›c á»Ÿ 100Â°C. Cho biáº¿t nhiá»‡t dung riÃªng cá»§a nÆ°á»›c lÃ  4180 J/kg.K; nhiá»‡t hoÃ¡ hÆ¡i riÃªng cá»§a nÆ°á»›c á»Ÿ 100Â°C lÃ  2,3.10â¶ J/kg", // need image
    qImage: "media/anh89.png",
    answers: [
      { text: "23000 kJ.", correct: false, image: null },
      { text: "19865 kJ.", correct: false, image: null },
      { text: "3135 kJ.", correct: false, image: null },
      { text: "26135 kJ", correct: true, image: null }
    ]
  },
  {
    q: "Káº¿t luáº­n nÃ o dÆ°á»›i Ä‘Ã¢y khÃ´ng Ä‘Ãºng vá»›i thá»ƒ ráº¯n?", // need image
    qImage: "media/anh4.png",
    answers: [
      { text: "CÃ¡c phÃ¢n tá»­ sáº¯p xáº¿p cÃ³ tráº­t tá»±.", correct: false, image: null },
      { text: "CÃ¡c phÃ¢n tá»­ dao Ä‘á»™ng xung quanh vá»‹ trÃ­ cÃ¢n báº±ng khÃ´ng cá»‘ Ä‘á»‹nh.", correct: true, image: null },
      { text: "CÃ¡c phÃ¢n tá»­ dao Ä‘á»™ng xung quanh vá»‹ trÃ­ cÃ¢n báº±ng cá»‘ Ä‘á»‹nh.", correct: false, image: null },
      { text: "Khoáº£ng cÃ¡ch giá»¯a cÃ¡c phÃ¢n tá»­ ráº¥t gáº§n nhau (cá»¡ kÃ­ch thÆ°á»›c phÃ¢n tá»­)", correct: false, image: null }
    ]
  },
  {
    q: "Má»™t thÃ¹ng Ä‘á»±ng 10 lÃ­t nÆ°á»›c á»Ÿ 20Â°C. Cho khá»‘i lÆ°á»£ng riÃªng cá»§a nÆ°á»›c lÃ  1000kg/mÂ³. Nhiá»‡t lÆ°á»£ng cáº§n truyá»n cho nÆ°á»›c trong thÃ¹ng Ä‘á»ƒ nhiá»‡t Ä‘á»™ cá»§a nÃ³ tÄƒng lÃªn tá»›i 70Â°C lÃ  bao nhiÃªu? Cho biáº¿t nhiá»‡t dung riÃªng cá»§a nÆ°á»›c lÃ  4200 J/kg.K",
    qImage: null,
    answers: [
      { text: "5.10âµ J.", correct: false, image: null },
      { text: "10â¶ J.", correct: false, image: null },
      { text: "21.10âµ J.", correct: true, image: null },
      { text: "10â· J.", correct: false, image: null }
    ]
  },
  {
    q: "NgÆ°á»i ta truyá»n cho khÃ­ trong xilanh nhiá»‡t lÆ°á»£ng 100 J. KhÃ­ ná»Ÿ ra thá»±c hiá»‡n cÃ´ng 70 J Ä‘áº©y pittÃ´ng lÃªn. Äá»™ biáº¿n thiÃªn ná»™i nÄƒng cá»§a khÃ­ lÃ  :", // need image
    qImage: "media/anh60.png",
    answers: [
      { text: "50 J.", correct: false, image: null },
      { text: "30 J.", correct: true, image: null },
      { text: "20 J.", correct: false, image: null },
      { text: "40 J.", correct: false, image: null }
    ]
  },
  {
    q: "PhÃ¡t biá»ƒu nÃ o sau Ä‘Ã¢y vá» ná»™i nÄƒng lÃ  khÃ´ng Ä‘Ãºng?",
    qImage: null,
    answers: [
      { text: "Ná»™i nÄƒng cÃ³ thá»ƒ chuyá»ƒn hoÃ¡ thÃ nh cÃ¡c dáº¡ng nÄƒng lÆ°á»£ng khÃ¡c.", correct: false, image: null },
      { text: "Ná»™i nÄƒng lÃ  nhiá»‡t lÆ°á»£ng.", correct: true, image: null },
      { text: "Ná»™i nÄƒng cá»§a má»™t váº­t cÃ³ thá»ƒ tÄƒng hoáº·c giáº£m.", correct: false, image: null },
      { text: "Ná»™i nÄƒng lÃ  má»™t dáº¡ng nÄƒng lÆ°á»£ng.", correct: false, image: null }
    ]
  },
  {
    q: "Tá»±a Ä‘á» BÃ i 7 lÃ  gÃ¬?",
    qImage: null,
    answers: [
      { text: "BÃ i táº­p vá» váº­t lÃ­ nhiá»‡t", correct: true, image: null },
      { text: "Nhiá»‡t dung riÃªng", correct: false, image: null },
      { text: "Nhiá»‡t nÃ³ng cháº£y riÃªng", correct: false, image: null },
      { text: "Nhiá»‡t hoÃ¡ hÆ¡i riÃªng", correct: false, image: null }
    ]
  },
  {
    q: "Tá»±a Ä‘á» BÃ i 6 lÃ  gÃ¬?",
    qImage: null,
    answers: [
      { text: "Nhiá»‡t hoÃ¡ hÆ¡i riÃªng", correct: true, image: null },
      { text: "Nhiá»‡t dung riÃªng", correct: false, image: null },
      { text: "Nhiá»‡t nÃ³ng cháº£y riÃªng", correct: false, image: null },
      { text: "BÃ i táº­p vá» váº­t lÃ­ nhiá»‡t", correct: false, image: null }
    ]
  },
  {
    q: "Tá»±a Ä‘á» BÃ i 5 lÃ  gÃ¬?",
    qImage: null,
    answers: [
      { text: "BÃ i táº­p vá» váº­t lÃ­ nhiá»‡t", correct: false, image: null },
      { text: "Nhiá»‡t dung riÃªng", correct: false, image: null },
      { text: "Nhiá»‡t nÃ³ng cháº£y riÃªng", correct: true, image: null },
      { text: "Nhiá»‡t hoÃ¡ hÆ¡i riÃªng", correct: false, image: null }
    ]
  },
  {
    q: "Tá»±a Ä‘á» BÃ i 4 lÃ  gÃ¬?",
    qImage: null,
    answers: [
      { text: "BÃ i táº­p vá» váº­t lÃ­ nhiá»‡t", correct: false, image: null },
      { text: "Nhiá»‡t dung riÃªng", correct: true, image: null },
      { text: "Nhiá»‡t nÃ³ng cháº£y riÃªng", correct: false, image: null },
      { text: "Nhiá»‡t hoÃ¡ hÆ¡i riÃªng", correct: false, image: null }
    ]
  },
  {
    q: "Tá»±a Ä‘á» BÃ i 3 lÃ  gÃ¬?",
    qImage: null,
    answers: [
      { text: "BÃ i táº­p vá» váº­t lÃ­ nhiá»‡t", correct: false, image: null },
      { text: "Nhiá»‡t Ä‘á»™. Thang nhiá»‡t Ä‘á»™ - nhiá»‡t káº¿", correct: true, image: null },
      { text: "Ná»™i nÄƒng. Äá»‹nh luáº­t I cá»§a nhiá»‡t Ä‘á»™ng lá»±c há»c", correct: false, image: null },
      { text: "Cáº¥u trÃºc cá»§a cháº¥t. Sá»± chuyá»ƒn thá»ƒ", correct: false, image: null }
    ]
  },
  {
    q: "Tá»±a Ä‘á» BÃ i 2 lÃ  gÃ¬?",
    qImage: null,
    answers: [
      { text: "BÃ i táº­p vá» váº­t lÃ­ nhiá»‡t", correct: false, image: null },
      { text: "Nhiá»‡t Ä‘á»™. Thang nhiá»‡t Ä‘á»™ - nhiá»‡t káº¿", correct: false, image: null },
      { text: "Ná»™i nÄƒng. Äá»‹nh luáº­t I cá»§a nhiá»‡t Ä‘á»™ng lá»±c há»c", correct: true, image: null },
      { text: "Cáº¥u trÃºc cá»§a cháº¥t. Sá»± chuyá»ƒn thá»ƒ", correct: false, image: null }
    ]
  },
  {
    q: "Tá»±a Ä‘á» BÃ i 1 lÃ  gÃ¬?",
    qImage: null,
    answers: [
      { text: "BÃ i táº­p vá» váº­t lÃ­ nhiá»‡t", correct: false, image: null },
      { text: "Nhiá»‡t Ä‘á»™. Thang nhiá»‡t Ä‘á»™ - nhiá»‡t káº¿", correct: false, image: null },
      { text: "Ná»™i nÄƒng. Äá»‹nh luáº­t I cá»§a nhiá»‡t Ä‘á»™ng lá»±c há»c", correct: false, image: null },
      { text: "Cáº¥u trÃºc cá»§a cháº¥t. Sá»± chuyá»ƒn thá»ƒ", correct: true, image: null }
    ]
  },
  {
    q: " SÃ¡ch Váº­t lÃ­ 12 KNTT gá»“m tá»•ng cá»™ng IV chÆ°Æ¡ng vÃ  25 BÃ i, C1: gá»“m 7 BÃ i, C2: gá»“m 6 BÃ i, C3: gá»“m 7 BÃ i, C4: gá»“m 5 BÃ i. HÃ£y sáº¯p xáº¿p Ä‘Ãºng thá»© tá»± ChÆ°Æ¡ng?",
    qImage: null,
    answers: [
      { text: "I: Váº¬T LÃ NHIá»†T - II: Tá»ª TRÆ¯á»œNG - III: KHÃ LÃ TÆ¯á»NG - IV: Váº¬T LÃ Háº T NHÃ‚N", correct: false, image: null },
      { text: "I: Váº¬T LÃ NHIá»†T - II: Váº¬T LÃ Háº T NHÃ‚N - III: Tá»ª TRÆ¯á»œNG - IV: KHÃ LÃ TÆ¯á»NG", correct: false, image: null },
      { text: "I: Váº¬T LÃ NHIá»†T - II: KHÃ LÃ TÆ¯á»NG - III: Tá»ª TRÆ¯á»œNG - IV: Váº¬T LÃ Háº T NHÃ‚N", correct: true, image: null },
      { text: "I: Váº¬T LÃ NHIá»†T - II: Váº¬T LÃ Háº T NHÃ‚N - III: KHÃ LÃ TÆ¯á»NG - IV: Tá»ª TRÆ¯á»œNG", correct: false, image: null }
    ]
  },
];

// True/False questions [D/S]
const trueFalseQuestions = [
  {
    q: "Khi nÃ³i vá» Ä‘áº·c Ä‘iá»ƒm cá»§a cÃ¡c cháº¥t ráº¯n, cháº¥t lá»ng, cháº¥t khÃ­.", // need image
    qImage: "media/anh8.png",
    answers: [
      { text: "CÃ¡c phÃ¢n tá»­ thá»ƒ lá»ng cÃ³ khoáº£ng cÃ¡ch giá»¯a chÃºng nhá» hÆ¡n trong thá»ƒ ráº¯n.", correct: false, image: null },
      { text: "CÃ¡c phÃ¢n tá»­ trong thá»ƒ khÃ­ tá»± do di chuyá»ƒn vÃ  khÃ´ng bá»‹ rÃ ng buá»™c bá»Ÿi lá»±c tÆ°Æ¡ng tÃ¡c giá»¯a chÃºng.", correct: true, image: null },
      { text: "Váº­t á»Ÿ thá»ƒ lá»ng khÃ´ng cÃ³ thá»ƒ tÃ­ch riÃªng, nhÆ°ng cÃ³ hÃ¬nh dáº¡ng riÃªng.", correct: false, image: null },
      { text: "Váº­t á»Ÿ thá»ƒ ráº¯n cÃ³ thá»ƒ tÃ­ch vÃ  hÃ¬nh dáº¡ng riÃªng, ráº¥t khÃ³ nÃ©n.", correct: true, image: null }
    ]
  },
  {
    q: "Tiáº¿n hÃ nh Ä‘o nhiá»‡t dung riÃªng cá»§a nÆ°á»›c vá»›i cÃ¡c dá»¥ng cá»¥ sau: Biáº¿n tháº¿ nguá»“n (1), bá»™ Ä‘o cÃ´ng suáº¥t nguá»“n nhiá»‡t (2), Nhiá»‡t káº¿ Ä‘iá»‡n tá»­ hoáº·c cáº£m biáº¿n nhiá»‡t Ä‘á»™ (3), Nhiá»‡t lÆ°á»£ng káº¿ (4), cÃ¢n Ä‘iá»‡n tá»­ (5), cÃ¡c dÃ¢y ná»‘i...", // need image
    qImage: "media/anh123.png",
    answers: [
      { text: "Äá»™ lá»›n cá»§a nhiá»‡t lÆ°á»£ng cáº§n cung cáº¥p cho nÆ°á»›c Ä‘á»ƒ lÃ m tÄƒng nhiá»‡t Ä‘á»™ cá»§a nÃ³ phá»¥ thuá»™c vÃ o khá»‘i lÆ°á»£ng cá»§a nÆ°á»›c, tÃ­nh cháº¥t cá»§a nÆ°á»›c, nhiá»‡t dung riÃªng cá»§a nÆ°á»›c.", correct: false, image: null },
      { text: "Äá»ƒ xÃ¡c Ä‘á»‹nh nhiá»‡t dung riÃªng cá»§a nÆ°á»›c cáº§n Ä‘o Ä‘áº¡i lÆ°á»£ng nhiá»‡t lÆ°á»£ng cáº§n truyá»n cho nÆ°á»›c, khá»‘i lÆ°á»£ng nÆ°á»›c vÃ  Ä‘á»™ tÄƒng nhiá»‡t Ä‘á»™ cá»§a nÆ°á»›c.", correct: true, image: null },
      { text: "Nhiá»‡t lÆ°á»£ng mÃ  nÆ°á»›c trong bÃ¬nh nhiá»‡t lÆ°á»£ng káº¿ thu Ä‘Æ°á»£c Ä‘áº¿n tá»« nguá»“n nhiá»‡t bÃªn ngoÃ i, thÆ°á»ng lÃ  tá»« quÃ¡ trÃ¬nh nhiá»‡t Ä‘á»•i hoáº·c tá»« má»™t nguá»“n nhiá»‡t khÃ¡c nhÆ° lá»­a, mÃ¡y nhiá»‡t, hoáº·c cÃ¡c nguá»“n nhiá»‡t khÃ¡c.", correct: true, image: null },
      { text: "CÃ¡c bÆ°á»›c Ä‘á»ƒ Ä‘o nhiá»‡t lÆ°á»£ng mÃ  nÆ°á»›c thu Ä‘Æ°á»£c trong bÃ¬nh nhiá»‡t lÆ°á»£ng káº¿: - Äo lÆ°á»£ng nÆ°á»›c. - Äo nhiá»‡t Ä‘á»™ ban Ä‘áº§u cá»§a nÆ°á»›c. - TÃ­nh toÃ¡n nhiá»‡t lÆ°á»£ng báº±ng cÃ´ng thá»©c: Q = m.c.Î”T - ÄÃ¡nh giÃ¡ káº¿t quáº£.", correct: false, image: null }
    ]
  },
  {
    q: "Khi nÃ³i vá» nhiá»‡t Ä‘á»™, thang nhiá»‡t Ä‘á»™, nhiá»‡t káº¿.", // need image
    qImage: "media/anh90.png",
    answers: [
      { text: "CÆ¡ sá»Ÿ cháº¿ táº¡o cÃ¡c loáº¡i dá»¥ng cá»¥ Ä‘o nhiá»‡t Ä‘á»™ lÃ  sá»± ná»Ÿ vÃ¬ nhiá»‡t cá»§a cháº¥t ráº¯n.", correct: false, image: null },
      { text: "Nhiá»‡t Ä‘á»™ cho biáº¿t tráº¡ng thÃ¡i cÃ¢n báº±ng nhiá»‡t cá»§a cÃ¡c váº­t tiáº¿p xÃºc nhau vÃ  chiá»u truyá»n nhiá»‡t nÄƒng.", correct: true, image: null },
      { text: "Trong phÃ²ng thÃ­ nghiá»‡m cÃ³ thá»ƒ nháº­n biáº¿t má»™t pháº£n á»©ng thu nhiá»‡t hoáº·c toáº£ nhiá»‡t báº±ng cÃ¡ch Ä‘o nhiá»‡t Ä‘á»™ cá»§a pháº£n á»©ng báº±ng má»™t nhiá»‡t káº¿.", correct: true, image: null },
      { text: "Theo báº£n tin thá»i tiáº¿t phÃ¡t lÃºc 19h50 ngÃ y 27/02/2022 thÃ¬ nhiá»‡t Ä‘á»™ trung bÃ¬nh ngÃ y - Ä‘Ãªm trong ngÃ y 28/02/2022 táº¡i HÃ  Ná»™i lÃ  25Â° C-17Â° C. Sá»± chÃªnh lá»‡ch nhiá»‡t Ä‘á»™ nÃ y trong thang Ä‘o Kelvin lÃ  9Âº K.", correct: false, image: null }
    ]
  },
  {
    q: "DÃ¹ng báº¿p Ä‘iá»‡n Ä‘á»ƒ Ä‘un má»™t áº¥m nhÃ´m khá»‘i lÆ°á»£ng 600g Ä‘á»±ng 1,5 lÃ­t nÆ°á»›c á»Ÿ nhiá»‡t Ä‘á»™ 20Â°C. Sau 35 phÃºt Ä‘Ã£ cÃ³ 20% lÆ°á»£ng nÆ°á»›c trong áº¥m hoÃ¡ hÆ¡i á»Ÿ nhiá»‡t Ä‘á»™ sÃ´i 100Â°C. Biáº¿t cÃ³ 100% nhiá»‡t lÆ°á»£ng mÃ  báº¿p toáº£ ra Ä‘Æ°á»£c dÃ¹ng vÃ o viá»‡c Ä‘un áº¥m nÆ°á»›c. Nhiá»‡t dung riÃªng cá»§a nhÃ´m lÃ  880 J/kg.K; cá»§a nÆ°á»›c lÃ  4200 J/kg.K; nhiá»‡t hoÃ¡ hÆ¡i riÃªng cá»§a nÆ°á»›c á»Ÿ nhiá»‡t Ä‘á»™ sÃ´i 100Â° C lÃ  2,26.10J/kg. Khá»‘i lÆ°á»£ng riÃªng cá»§a nÆ°á»›c lÃ  1 kg/lÃ­t.", // need image
    qImage: "media/anh65.png",
    answers: [
      { text: "Nhiá»‡t lÆ°á»£ng cáº§n thiáº¿t Ä‘á»ƒ Ä‘un nÆ°á»›c tá»« 20Â°C Ä‘áº¿n 100Â° C lÃ  504000 J.", correct: true, image: null },
      { text: "LÆ°á»£ng nÆ°á»›c Ä‘Ã£ hoÃ¡ hÆ¡i lÃ  0,03 kg.", correct: false, image: null },
      { text: "Nhiá»‡t lÆ°á»£ng mÃ  báº¿p Ä‘iá»‡n cung cáº¥p Ä‘á»ƒ Ä‘un nÆ°á»›c lÃ  1224240 J.", correct: true, image: null },
      { text: "Nhiá»‡t lÆ°á»£ng trung bÃ¬nh mÃ  báº¿p Ä‘iá»‡n cung cáº¥p cho áº¥m nÆ°á»›c trong má»—i giÃ¢y lÃ  675,22 J.", correct: false, image: null }
    ]
  },
  {
    q: "Khi nÃ³i vá» ná»™i nÄƒng cá»§a má»™t váº­t.",
    qImage: null,
    answers: [
      { text: "Ná»™i nÄƒng cá»§a má»™t váº­t phá»¥ thuá»™c vÃ o nhiá»‡t Ä‘á»™ vÃ  thá»ƒ tÃ­ch cá»§a váº­t.", correct: true, image: null },
      { text: "Ná»™i nÄƒng cá»§a má»™t váº­t thay Ä‘á»•i trong quÃ¡ trÃ¬nh truyá»n nhiá»‡t vÃ  trong quÃ¡ trÃ¬nh thá»±c hiá»‡n cÃ´ng.", correct: true, image: null },
      { text: "Ná»™i nÄƒng cá»§a váº­t (1) lá»›n hÆ¡n ná»™i nÄƒng cá»§a váº­t (2) thÃ¬ nhiá»‡t Ä‘á»™ cá»§a váº­t (1) cÅ©ng lá»›n hÆ¡n nhiá»‡t Ä‘á»™ cá»§a váº­t (2).", correct: false, image: null },
      { text: "Má»™t váº­t lÃºc nÃ o cÅ©ng cÃ³ ná»™i nÄƒng, do Ä‘Ã³ lÃºc nÃ o cÅ©ng cÃ³ nhiá»‡t lÆ°á»£ng.", correct: false, image: null }
    ]
  }
];

// Essay questions [TL]
const essayQuestions = [
  {
    q: "Chuyá»ƒn Ä‘á»•i nhiá»‡t Ä‘á»™ khÃ´ng khÃ­ trong phÃ²ng lÃ  27Â°C sang nhiá»‡t Ä‘á»™ Kelvin?",
    qImage: null,
    answerRef: "T = 27 + 273 = 300Â°K.",
    answerRefImage: null
  },
  {
    q: "NgÆ°á»i ta cung cáº¥p má»™t nhiá»‡t lÆ°á»£ng 2 J cho cháº¥t khÃ­ Ä‘á»±ng trong má»™t xilanh Ä‘áº·t náº±m ngang. KhÃ­ ná»Ÿ ra Ä‘áº©y pittÃ´ng Ä‘i má»™t Ä‘oáº¡n 4 cm. Biáº¿t lá»±c ma sÃ¡t giá»¯a pittÃ´ng vÃ  xilanh cÃ³ Ä‘á»™ lá»›n 10 N. TÃ­nh Ä‘á»™ biáº¿n thiÃªn ná»™i nÄƒng cá»§a khÃ­?", // need image
    qImage: "media/anh98.png",
    answerRef: "âˆ†U = Q + A = Q â€“ F.S = 2 â€“ 10.0,04 = 1,6J.",
    answerRefImage: null
  },
  {
    q: "Má»™t bÃ¬nh nhÃ´m khá»‘i lÆ°á»£ng 0,5kg á»Ÿ nhiá»‡t Ä‘á»™ 20Â°C. Nhiá»‡t lÆ°á»£ng cáº§n cung cáº¥p lÃ  bao nhiÃªu (10â´ J ) Ä‘á»ƒ nÃ³ tÄƒng lÃªn 50Â°C. Biáº¿t nhiá»‡t dung riÃªng cá»§a nhÃ´m lÃ  0,92.10Â³ J/kg. K.",
    qImage: "media/anh130.png",
    answerRef: "Q = mc.Î”T = 0,5.0,92.10Â³. (50 â€“ 20) = 13800 = 1,38.10â´ J.",
    answerRefImage: null
  },
  {
    q: "Láº¥y 0,01 kg hÆ¡i nÆ°á»›c á»Ÿ 100Â°C cho ngÆ°ng tá»¥ trong bÃ¬nh nhiá»‡t lÆ°á»£ng káº¿ chá»©a 0,2 kg nÆ°á»›c á»Ÿ 9,5Â°C; nhiá»‡t Ä‘á»™ cuá»‘i cÃ¹ng lÃ  40Â°C, cho nhiá»‡t dung riÃªng cá»§a nÆ°á»›c lÃ  c = 4180 J/kg.K. Nhiá»‡t hÃ³a hÆ¡i riÃªng cá»§a nÆ°á»›c báº±ng bao nhiÃªu (10â¶ J/kg)?", // need image
    qImage: "media/anh131.png",
    answerRef: "Nhiá»‡t lÆ°á»£ng tá»a ra khi ngÆ°ng tá»¥ hÆ¡i nÆ°á»›c á»Ÿ 100Â°C thÃ nh nÆ°á»›c á»Ÿ 100Â°C: Qâ‚ = L.mâ‚ = 0,01.L. Nhiá»‡t lÆ°á»£ng tá»a ra khi nÆ°á»›c á»Ÿ 100Â°C thÃ nh nÆ°á»›c á»Ÿ 40Â°C: Qâ‚‚ = mc(100-40) = 0,01.4180(100-40) = 2508J. Nhiá»‡t lÆ°á»£ng tá»a ra khi hÆ¡i nÆ°á»›c á»Ÿ 100Â°C biáº¿n thÃ nh nÆ°á»›c á»Ÿ 40Â°C: Q = Qâ‚ + Qâ‚‚ = 0,01L + 2508 (1). Nhiá»‡t lÆ°á»£ng cáº§n cung cáº¥p Ä‘á»ƒ 0,2kg nÆ°á»›c tá»« 9,5Â°C thÃ nh nÆ°á»›c á»Ÿ 40Â°C: Qâ‚ƒ = 0,2.4180(40-9,5) = 25498J (2). Theo phÆ°Æ¡ng trÃ¬nh cÃ¢n báº±ng nhiá»‡t: (1) = (2) => 0,01L + 2508 = 25498 => L = 2,3.10â¶ J/kg.",
    answerRefImage: null
  },
  {
    q: "Má»™t áº¥m Ä‘un nÆ°á»›c cÃ³ cÃ´ng suáº¥t 500 W chá»©a 300g nÆ°á»›c á»Ÿ 20Â°C. Cho nhiá»‡t dung riÃªng vÃ  nhiá»‡t hoÃ¡ hÆ¡i riÃªng cá»§a nÆ°á»›c láº§n lÆ°á»£t lÃ  4 180 J/kg.K vÃ  2,0.10â¶ J/kg. TÃ­nh thá»i gian cáº§n thiáº¿t Ä‘á»ƒ Ä‘un nÆ°á»›c trong áº¥m Ä‘áº¡t Ä‘áº¿n nhiá»‡t Ä‘á»™ sÃ´i theo Ä‘Æ¡n vá»‹ phÃºt (lÃ m trÃ²n 2 sá»‘ tháº­p phÃ¢n)?", // need image
    qImage: "media/anh97.png",
    answerRef: "Q = mc.Î”T = 0,3.4180.(100 â€“ 20) = 101440J. Thá»i gian: t = Q/P = 101440/500 = 202,88s â‰ˆ 3,38 phÃºt.",
    answerRefImage: null
  }
];

  // --- UTILITY FUNCTIONS ---
  function shuffleArray(arr) {
    for(let i = arr.length - 1; i > 0; i--){
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  function escapeHtml(unsafe) {
    return unsafe
      .replace(/</g, "â€¹")
      .replace(/>/g, "â€º")
      .replace(/"/g, "'");
  }

  // --- DOM ELEMENTS ---
  const btnMulti = document.getElementById('btn-multi');
  const btnTrueFalse = document.getElementById('btn-truefalse');
  const btnEssay = document.getElementById('btn-essay');
  const toggleThemeBtn = document.getElementById('toggle-theme');
  const btnExit = document.getElementById('btn-exit'); 
  const btnBackHomeInQuiz = document.getElementById('btn-back-home-in-quiz'); // NÃºt Back Home trong quiz
  const btnDownload = document.getElementById('btn-download');

  const quizSection = document.getElementById('quiz-section');
  const questionBlock = document.getElementById('question-block');
  const answersBlock = document.getElementById('answers-block');
  const essayInputBlock = document.getElementById('essay-input-block');
  const essayAnswerTextarea = document.getElementById('essay-answer');
  const btnEssaySubmit = document.getElementById('btn-essay-submit');
  const btnNext = document.getElementById('btn-next');

  const timerSpan = document.getElementById('timer');
  const doneCountSpan = document.getElementById('done-count');
  const correctCountSpan = document.getElementById('correct-count');
  const wrongCountSpan = document.getElementById('wrong-count');

  const resultSection = document.getElementById('result-section');
  const resultTime = document.getElementById('result-time');
  const resultTotal = document.getElementById('result-total');
  const resultCorrect = document.getElementById('result-correct');
  const resultWrong = document.getElementById('result-wrong');
  const starRating = document.getElementById('star-rating');

  // const btnRestart = document.getElementById('btn-restart'); // ÄÃ£ xÃ³a khá»i HTML, nÃªn bá» dÃ²ng nÃ y hoáº·c comment láº¡i
  const btnHome = document.getElementById('btn-home');

  // --- STATE VARIABLES ---
  let quizType = null; // 'multi', 'truefalse', 'essay'
  let questions = [];
  let currentQIdx = 0;
  let timerInterval = null;
  let timeSeconds = 0;
  let doneCount = 0;
  let correctCount = 0;
  let wrongCount = 0;
  let currentTFAnswerIdx = 0;

  // --- TIMER FUNCTIONS ---
  function startTimer() {
    timeSeconds = 0;
    timerSpan.textContent = formatTime(timeSeconds);
    if(timerInterval) clearInterval(timerInterval);
    timerInterval = setInterval(() => {
      timeSeconds++;
      timerSpan.textContent = formatTime(timeSeconds);
    }, 1000);
  }

  function stopTimer() {
    if(timerInterval) clearInterval(timerInterval);
  }

  function formatTime(s) {
    const m = Math.floor(s/60);
    const sec = s % 60;
    return (m < 10 ? '0' + m : m) + ':' + (sec < 10 ? '0' + sec : sec);
  }

  // --- QUIZ FUNCTIONS ---
  function resetStats() {
    doneCount = 0;
    correctCount = 0;
    wrongCount = 0;
    doneCountSpan.textContent = "0";
    correctCountSpan.textContent = "0";
    wrongCountSpan.textContent = "0";
  }

  function initQuiz(type) {
    quizType = type;
    currentQIdx = 0;
    resetStats();

    if(type === 'multi') {
      questions = multiChoiceQuestions.map(q => ({
        q: q.q,
        qImage: q.qImage,
        answers: shuffleArray(q.answers.slice())
      }));
      shuffleArray(questions);
    } else if(type === 'truefalse') {
      questions = trueFalseQuestions.map(q => ({
        q: q.q,
        qImage: q.qImage,
        answers: shuffleArray(q.answers.slice())
      }));
      shuffleArray(questions);
      currentTFAnswerIdx = 0;
    } else if(type === 'essay') {
      questions = essayQuestions.map(q => ({
        q: q.q,
        qImage: q.qImage,
        answerRef: q.answerRef,
        answerRefImage: q.answerRefImage
      }));
      shuffleArray(questions);
    }
    
    quizSection.style.display = 'block';
    resultSection.style.display = 'none';
    btnMulti.style.display = 'none';
    btnTrueFalse.style.display = 'none';
    btnEssay.style.display = 'none';
    btnExit.style.display = 'none'; // áº¨n nÃºt Exit khi báº¯t Ä‘áº§u quiz
    toggleThemeBtn.style.display = 'none'; // áº¨n nÃºt chuyá»ƒn theme khi vÃ o quiz
    btnDownload.style.display = 'none';

    showQuestion();
    startTimer();
  }

  function showQuestion() {
    // áº¨n nÃºt "Tiáº¿p tá»¥c" náº¿u nÃ³ Ä‘ang hiá»ƒn thá»‹
    btnNext.style.display = 'none'; 
    // Náº¿u lÃ  dáº¡ng tá»± luáº­n, nÃºt "Xong" (submit) sáº½ Ä‘Æ°á»£c hiá»ƒn thá»‹, ngÆ°á»£c láº¡i áº©n
    btnEssaySubmit.style.display = (quizType === 'essay') ? 'block' : 'none';
    // Äáº£m báº£o nÃºt "Xong" Ä‘Æ°á»£c kÃ­ch hoáº¡t láº¡i cho cÃ¢u há»i tá»± luáº­n má»›i
    btnEssaySubmit.disabled = false; 

    answersBlock.innerHTML = ''; // XÃ³a cÃ¡c cÃ¢u tráº£ lá»i cÅ©
    essayInputBlock.style.display = 'none'; // áº¨n khung nháº­p tá»± luáº­n
    essayAnswerTextarea.value = ''; // XÃ³a ná»™i dung cÅ© trong khung tá»± luáº­n
    
    if (currentQIdx >= questions.length) {
      endQuiz();
      return;
    }

    const currentQ = questions[currentQIdx];
    
    // Display question text and image (if any)
    let questionHTML = `
      <div style="color: var(--orange); font-weight: bold; margin-bottom: 15px;">
        CÃ¢u ${currentQIdx + 1}: ${escapeHtml(currentQ.q)}
      </div>
    `;
    
    if (currentQ.qImage) {
      questionHTML += `
        <div style="text-align: center; margin: 15px 0;">
          <img src="${currentQ.qImage}" 
               style="max-width: 100%; max-height: 300px; border: 1px solid #ccc; border-radius: 5px;"
               onerror="this.style.display='none'">
        </div>
      `;
    }
    
    questionBlock.innerHTML = questionHTML;

    if (quizType === 'multi') {
      // Multiple choice questions
      answersBlock.style.display = 'block';
      currentQ.answers.forEach((ans, i) => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        
        let answerContent = `${String.fromCharCode(65 + i)}. ${escapeHtml(ans.text)}`;
        
        if (ans.image) {
          answerContent += `
            <div style="margin-top: 8px; text-align: center;">
              <img src="${ans.image}" 
                   style="max-width: 100%; max-height: 150px; border: 1px solid #ddd; border-radius: 3px;"
                   onerror="this.style.display='none'">
            </div>
          `;
        }
        
        btn.innerHTML = answerContent;
        btn.onclick = () => handleMultiAnswerClick(btn, ans.correct, currentQ.answers);
        answersBlock.appendChild(btn);
      });

    } else if (quizType === 'truefalse') {
      // True/False questions
      answersBlock.style.display = 'block';
      currentTFAnswerIdx = 0;
      showTrueFalseAnswer(currentQ.answers[currentTFAnswerIdx]);
      
    } else if (quizType === 'essay') {
      // Essay questions
      essayInputBlock.style.display = 'block';
    }
  }

  function handleMultiAnswerClick(btn, isCorrect, allAnswers) {
    Array.from(answersBlock.children).forEach(b => b.classList.add('disabled'));

    doneCount++;
    doneCountSpan.textContent = doneCount;

    if(isCorrect) {
      btn.classList.add('correct');
      correctCount++;
      correctCountSpan.textContent = correctCount;
    } else {
      btn.classList.add('incorrect');
      wrongCount++;
      wrongCountSpan.textContent = wrongCount;
      // Highlight correct answer
      const correctAns = allAnswers.find(a => a.correct);
      for(let b of answersBlock.children) {
        // Cáº©n tháº­n vá»›i viá»‡c so sÃ¡nh textContent trá»±c tiáº¿p náº¿u cÃ³ hÃ¬nh áº£nh
        // Cáº§n láº¥y chá»‰ pháº§n text cá»§a cÃ¢u tráº£ lá»i
        const btnText = b.childNodes[0].nodeType === 3 ? b.childNodes[0].nodeValue.substring(3).trim() : ''; // Láº¥y text trÆ°á»›c hÃ¬nh áº£nh
        const correctText = escapeHtml(correctAns.text);

        if(btnText === correctText && correctAns.correct) {
          b.classList.add('correct');
          break;
        }
      }
    }
    btnNext.style.display = 'inline-block';
  }

  function showTrueFalseAnswer(answerObj) {
    answersBlock.innerHTML = '';

    const label = document.createElement('div');
    label.style.marginBottom = '10px';
    label.style.fontWeight = 'bold';
    label.textContent = `CÃ¢u há»i phá»¥ ${currentTFAnswerIdx + 1}: ${answerObj.text}`;
    answersBlock.appendChild(label);

    if (answerObj.image) {
      const imgDiv = document.createElement('div');
      imgDiv.style.textAlign = 'center';
      imgDiv.style.margin = '10px 0';
      imgDiv.innerHTML = `<img src="${answerObj.image}" style="max-width: 100%; max-height: 200px; border: 1px solid #ccc; border-radius: 3px;" onerror="this.style.display='none'">`;
      answersBlock.appendChild(imgDiv);
    }

    const btnTrue = document.createElement('button');
    btnTrue.className = 'answer-btn';
    btnTrue.textContent = 'ÄÃºng';
    btnTrue.onclick = () => handleTrueFalseAnswerClick(true, answerObj.correct);
    answersBlock.appendChild(btnTrue);
    
    const btnFalse = document.createElement('button');
    btnFalse.className = 'answer-btn';
    btnFalse.textContent = 'Sai';
    btnFalse.onclick = () => handleTrueFalseAnswerClick(false, answerObj.correct);
    answersBlock.appendChild(btnFalse);
  }

  function handleTrueFalseAnswerClick(userAnswer, correctAnswer) {
    Array.from(answersBlock.querySelectorAll('button')).forEach(b => b.classList.add('disabled'));

    doneCount++;
    doneCountSpan.textContent = doneCount;

    if(userAnswer === correctAnswer) {
      correctCount++;
      correctCountSpan.textContent = correctCount;
      Array.from(answersBlock.querySelectorAll('button')).forEach(b => {
        if(b.textContent.toLowerCase() === (userAnswer ? 'Ä‘Ãºng' : 'sai')) {
          b.classList.add('correct');
        }
      });
    } else {
      wrongCount++;
      wrongCountSpan.textContent = wrongCount;
      Array.from(answersBlock.querySelectorAll('button')).forEach(b => {
        if(b.textContent.toLowerCase() === (userAnswer ? 'Ä‘Ãºng' : 'sai')) {
          b.classList.add('incorrect');
        }
        if(b.textContent.toLowerCase() === (correctAnswer ? 'Ä‘Ãºng' : 'sai')) {
          b.classList.add('correct');
        }
      });
    }

    btnNext.style.display = 'inline-block';
  }

  // Essay submit handler
  btnEssaySubmit.onclick = () => {
    const userText = essayAnswerTextarea.value.trim();
    if(userText.length === 0) {
      alert('HÃ£y nháº­p cÃ¢u tráº£ lá»i trÆ°á»›c khi nháº¥n "Xong"');
      return;
    }
    btnEssaySubmit.disabled = true; // VÃ´ hiá»‡u hÃ³a nÃºt "Xong" sau khi submit
    
    doneCount++;
    doneCountSpan.textContent = doneCount;

    const currentQ = questions[currentQIdx];
    let answerRefHTML = `<br><br><em><strong>ÄÃ¡p Ã¡n tham kháº£o:</strong> ${currentQ.answerRef}</em>`;
    
    if(currentQ.answerRefImage) {
      answerRefHTML += `<div style="margin: 15px 0; text-align: center;">
        <img src="${currentQ.answerRefImage}" style="max-width: 100%; max-height: 300px; border: 1px solid #ccc; border-radius: 5px;">
      </div>`;
    }
    
    questionBlock.innerHTML += answerRefHTML;
    btnNext.style.display = 'inline-block';
  };

  btnNext.onclick = () => {
    // áº¨n nÃºt "Tiáº¿p tá»¥c"
    btnNext.style.display = 'none';
    // Äáº£m báº£o nÃºt "Xong" (essay) Ä‘Æ°á»£c kÃ­ch hoáº¡t láº¡i
    btnEssaySubmit.disabled = false; 

    if(quizType === 'truefalse') {
      currentTFAnswerIdx++;
      const currentQ = questions[currentQIdx];
      // Náº¿u cÃ²n cÃ¢u há»i phá»¥ trong cÃ¢u há»i ÄÃºng/Sai hiá»‡n táº¡i
      if(currentTFAnswerIdx < currentQ.answers.length) {
        showTrueFalseAnswer(currentQ.answers[currentTFAnswerIdx]);
        return; // KhÃ´ng chuyá»ƒn sang cÃ¢u há»i tiáº¿p theo mÃ  hiá»ƒn thá»‹ cÃ¢u phá»¥
      }
    }

    // Chuyá»ƒn sang cÃ¢u há»i tiáº¿p theo
    currentQIdx++;
    showQuestion();
  };

  function endQuiz() {
    stopTimer();
    quizSection.style.display = 'none';
    resultSection.style.display = 'block';
    toggleThemeBtn.style.display = 'block'; // Hiá»ƒn thá»‹ láº¡i nÃºt chuyá»ƒn theme

    resultTime.textContent = formatTime(timeSeconds);
    resultTotal.textContent = doneCount;
    resultCorrect.textContent = correctCount;
    resultWrong.textContent = wrongCount;

    starRating.innerHTML = '';

    // Logic tÃ­nh sao Ä‘Ã£ Ä‘Æ°á»£c khÃ´i phá»¥c vÃ  tinh chá»‰nh
    if(quizType === 'multi' || quizType === 'truefalse') {
      let starsGreen = 0;
      let starsGray = 0;
      
      if(wrongCount === 0) { // Náº¿u khÃ´ng cÃ³ cÃ¢u sai
        starsGreen = 3; // 3 sao xanh
      } else if (wrongCount >= 1 && wrongCount <= 3) {
        starsGreen = 2; // 2 sao xanh
        starsGray = 1; // 1 sao xÃ¡m
      } else if (wrongCount >= 4 && wrongCount <= 9) {
        starsGreen = 1; // 1 sao xanh
        starsGray = 2; // 2 sao xÃ¡m
      } else { // wrongCount >= 10
        starsGreen = 0; // 0 sao xanh
        starsGray = 3; // 3 sao xÃ¡m
      }

      for(let i = 1; i <= 3; i++) {
        const star = document.createElement('span');
        star.classList.add('star');
        if(i <= starsGreen) star.classList.add('Green');
        else if(i <= starsGray) star.classList.add('gray');
        star.innerHTML = '&#9733;';
        starRating.appendChild(star);
      }
    } else if (quizType === 'essay') {
        // Äá»‘i vá»›i bÃ i tá»± luáº­n, khÃ´ng cÃ³ Ä‘iá»ƒm Ä‘Ãºng/sai tá»± Ä‘á»™ng
        // Báº¡n cÃ³ thá»ƒ thÃªm logic cháº¥m Ä‘iá»ƒm thá»§ cÃ´ng hoáº·c hiá»ƒn thá»‹ thÃ´ng bÃ¡o khÃ¡c
        const infoDiv = document.createElement('div');
        infoDiv.textContent = "BÃ i Tá»± Luáº­n Cáº§n ÄÆ°á»£c GiÃ¡o ViÃªn Cháº¥m Äiá»ƒm.";
        infoDiv.style.fontWeight = "bold";
        infoDiv.style.marginTop = "20px";
        starRating.appendChild(infoDiv);
    }
  }

  // --- EVENT LISTENERS ---
  // ÄÃ£ xÃ³a btnRestart.onclick vÃ  logic liÃªn quan
  // Náº¿u báº¡n muá»‘n chá»©c nÄƒng "lÃ m láº¡i" bÃ i quiz, báº¡n cáº§n táº¡o má»™t nÃºt má»›i vá»›i ID khÃ¡c
  // vÃ  thÃªm láº¡i logic reset Stats vÃ o event listener cá»§a nÃºt Ä‘Ã³.

  // NÃºt Home (á»Ÿ mÃ n hÃ¬nh káº¿t quáº£) - váº«n reload trang hiá»‡n táº¡i
  btnHome.onclick = () => {
    location.reload(); 
  };

  btnMulti.onclick = () => initQuiz('multi');
  btnTrueFalse.onclick = () => initQuiz('truefalse');
  btnEssay.onclick = () => initQuiz('essay');
  // New: Download button functionality
  btnDownload.onclick = () => {
    const htmlContent = document.documentElement.outerHTML;
    const blob = new Blob([htmlContent], { type: 'text/html' });
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'toancreator-default'; // Set the desired filename
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(a.href);
  };
  
  
  // Xá»­ lÃ½ sá»± kiá»‡n cho nÃºt Exit má»›i
  btnExit.onclick = () => {
    window.location.href = '../index.html'; // Chuyá»ƒn hÆ°á»›ng vá» index.html
  };

  // Xá»­ lÃ½ sá»± kiá»‡n cho nÃºt Back to Home trong quiz
  btnBackHomeInQuiz.onclick = () => {
    if (confirm('Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n thoÃ¡t bÃ i lÃ m hiá»‡n táº¡i?')) {
      stopTimer(); // Dá»«ng Ä‘á»“ng há»“
      location.reload(); // Táº£i láº¡i trang promt-onlineV2.html
    }
  };

  toggleThemeBtn.onclick = () => {
    document.body.classList.toggle('dark');
  };

  // áº¨n/hiá»‡n nÃºt toggle theme ban Ä‘áº§u
  // Báº¡n cÃ³ thá»ƒ Ä‘áº·t nÃºt toggle theme á»Ÿ vá»‹ trÃ­ cá»‘ Ä‘á»‹nh thay vÃ¬ áº©n/hiá»‡n tÃ¹y thuá»™c vÃ o mÃ n hÃ¬nh
  // Hiá»‡n táº¡i, nÃ³ sáº½ luÃ´n hiá»ƒn thá»‹ trá»« khi bá»‹ áº©n bá»Ÿi CSS hoáº·c logic khÃ¡c
  toggleThemeBtn.style.display = 'block'; 
})();
</script>
</body>
</html>